
<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Farm for future food</title>
    <!-- Favicon -->
    <link rel="icon" href="assets/img/brand/farm.png" type="image/png">
    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
    <!-- Icons -->
    <link rel="stylesheet" href="assets/vendor/nucleo/css/nucleo.css" type="text/css">
    <link rel="stylesheet" href="assets/vendor/@fortawesome/fontawesome-free/css/all.min.css" type="text/css">
    <!-- Argon CSS -->
    <link rel="stylesheet" href="assets/css/argon.css?v=1.2.0" type="text/css"> 
  </head>
  
  <body class="g-sidenav-hidden">
    <!-- Sidenav -->
    <nav class="sidenav navbar navbar-vertical  fixed-left  navbar-expand-xs navbar-light bg-white" id="sidenav-main">
      <div class="scroll-wrapper scrollbar-inner" style="position: relative";>
        <div class="scrollbar-inner scroll-content" style="height: 796px; margin-bottom: 0px; margin-right: 0px; max-height: none;">
          <!-- Brand -->
          <div class="sidenav-header  align-items-center">
            <a class="navbar-brand" href="home.html">
              <img src="assets/img/brand/farm.png" class="navbar-brand-img" alt= "">
            </a>
            <h6 class="h2 text-green d-inline-block mb-0">Farm for future food</h6>
          </div>
          <!-- Divider -->
          <hr class="my-3">
          <div class="navbar-inner">
            <!-- Collapse -->
            <div class="collapse navbar-collapse" id="sidenav-collapse-main">
              <!-- Nav items -->
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link nav-link-icon" href="grafici_vendite.html">
                      <i class="ni ni-chart-bar-32"></i>
                      <span class="nav-link-inner--text">I miei prodotti</span>
                    </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link nav-link-icon" href="news_prodotti.html">
                      <i class="ni ni-bullet-list-67"></i>
                      <span class="nav-link-inner--text">Cerca prodotti</span>
                    </a>
                </li>
              </ul>  
            </div>
          </div>  
        </div>
        <div class="scroll-element scroll-x"><div class="scroll-element_outer"><div class="scroll-element_size"></div><div class="scroll-element_track"></div><div class="scroll-bar" style="width: 0px;"></div></div></div>
        <div class="scroll-element scroll-y"><div class="scroll-element_outer"><div class="scroll-element_size"></div><div class="scroll-element_track"></div><div class="scroll-bar" style="height: 0px;"></div></div></div>
      </div>
    </nav>
  
  <!-- Main content -->
  <div class="main-content" id="panel">
  
  <nav class="navbar navbar-top navbar-expand navbar-dark bg-primary border-bottom">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            
            <ul class="navbar-nav ml-lg-auto">
              <li class="nav-item d-xl-none">
                <!-- Sidenav toggler -->
                <div class="pr-3 sidenav-toggler sidenav-toggler-dark" data-action="sidenav-pin" data-target="#sidenav-main">
                  <div class="sidenav-toggler-inner">
                    <i class="sidenav-toggler-line"></i>
                    <i class="sidenav-toggler-line"></i>
                    <i class="sidenav-toggler-line"></i>
                  </div>
                </div>
              </li>
            </ul>
            <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
              <li class="nav-item dropdown">
                <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <div class="media align-items-center">
                    <span class="avatar avatar-sm rounded-circle">
                      <img alt="Image placeholder" src="assets/img/theme/team-4.jpg">
                    </span>
                    <div class="media-body  ml-2  d-none d-lg-block">
                      <span class="mb-0 text-sm  font-weight-bold">Gaetano Rossi</span>
                    </div>
                  </div>
                </a>
                <div class="dropdown-menu  dropdown-menu-right ">
                  <a href="profilo.html" class="dropdown-item">
                    <i class="ni ni-single-02"></i>
                    <span class="nav-link-text">Il mio profilo</span>
                  </a>
                  
                  <a href="supporto.html" class="dropdown-item">
                    <i class="ni ni-support-16"></i>
                    <span>Supporto</span>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a href="login.html" class="dropdown-item">
                    <i class="ni ni-user-run"></i>
                    <span>Logout</span>
                  </a>
                </div>
              </li>
            </ul>    
        </div>
    </div>
  </nav>

   <!-- Header -->
   <div class="header bg-primary pb-6">
    <div class="container-fluid">
      <div class="header-body">
        <div class="row align-items-center py-4">
          <div class="col-lg-6 col-7">
            <h6 class="h2 text-white d-inline-block mb-0"></h6>
             <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
              <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                <li class="breadcrumb-item"><a href="home.html"><i class="fas fa-home"></i></a></li>
                <li class="breadcrumb-item"><a href="news_prodotti.html">Cerca prodotti</a></li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>

 
<!-- Page content -->
    <div class="container-fluid mt--6">
      <div class="row">
        <div class="col">
    
          <!-- Form -->
  			  <div class="form-group">
    			  <select name="scelta" class="form-control" id="exampleFormControlSelect" onchange="getArticles();">
              <option>Scegli un prodotto:</option>
              <option value="Avocado">Avocado</option>
              <option value="Papaya">Papaya</option>
              <option value="Maracuja">Maracuja</option>
              <option value="Mango">Mango</option>
              <option value="Quinoa">Quinoa</option>
      		  </select>
          </div>
          
          <!-- Tabella -->
	        <div class="card">
            <div class="table-responsive">
              <table class="table align-items-center table-flush">
                <thead class="thead-light">
                  <tr>
                    <th scope="col" class="sort" data-sort="budget">Articoli</th>
                  </tr>
                </thead>
                <tbody id="tableRSSBody"  class="list"> 
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="card" id="card-vendite" hidden=true>
        <div class="table-responsive">
          <div class="card-body">
            <div class="chart">
              <!-- Chart wrapper -->
              <canvas id="lineChartPrezzo"></canvas>
            </div>
          </div>
        </div>
         
      </div>

      <div class="card" id="card-semina" hidden=true>
        <div class="card-body">
          <div class="chart">
            <!-- Chart wrapper -->
            <canvas id="lineChartSemina"></canvas>
          </div>
        </div> 
      </div>

    </div>
  </div>

 

  <script src="assets/vendor/jquery/dist/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/js-cookie/js.cookie.js"></script>
  <script src="assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
  <script src="assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script>
  <script src="assets/vendor/chart.js/dist/Chart.min.js"></script>
  <script src="assets/vendor/chart.js/dist/Chart.extension.js"></script>
  <script src="assets/js/argon.js?v=1.2.0"></script>
  

<script language="JavaScript">

$(document).ready(function() {
          controlLogin();
      });

  function controlLogin() {

    var cookie = leggiCookie('email');

    if (cookie=="gaetanorossi50@gmail.com") {
      window.location = "#";
    }

    else {
      window.location = "login.html";
    }
  }

function leggiCookie(nomeCookie)
{
if (document.cookie.length > 0)
{
  var inizio = document.cookie.indexOf(nomeCookie + "=");
  if (inizio != -1)
  {
    inizio = inizio + nomeCookie.length + 1;
    var fine = document.cookie.indexOf(";",inizio);
    if (fine == -1) fine = document.cookie.length;
    return unescape(document.cookie.substring(inizio,fine));
  }else{
     return "";
  }
}
return "";
}

	function getArticles() {

		var termine = document.getElementById("exampleFormControlSelect").value;
		
            console.log(termine);

            $('#tableRSSBody').html(""); 

            request = Object();

            request.params = Object(); 
            request.params.topic = termine;

            request = JSON.stringify(request);

            console.log(request);

            apiurl = "evaluateRSS.php"; 

            tableContent = ""; 

            var jqxhr = $.post(apiurl, request, function() {})
                .done(function(response) {
                    decoded = JSON.parse(response); 

                    console.log(decoded);

                    i = 1;

                    Object.values(decoded).forEach(val => {

                        tableContent += "<tr><th scope='row'>" + val.description + "</td></tr>";
                        i++;
                    });


                    $('#tableRSSBody').html(tableContent);
                    
                })
                .fail(function(response, status, error) {

                    alert(status);
                })
                .always(function() {

                });
    //line

var ctxL = document.getElementById("lineChartPrezzo").getContext('2d');
var myLineChart = new Chart(ctxL, {
type: 'line',
data: {
labels: ["Gen", "Feb", "Mar", "Apr", "Mag", "Giu", "Lug", "Ago", "Set", "Ott", "Nov", "Dic"],
datasets: [{
label: "Andamento di vendita del prodotto nell'anno 2019",
data: [65, 59, 80, 81, 56, 55, 40, 50, 70, 45, 65, 35],
backgroundColor: [
'rgba(0, 0, 255, 0.6)',
],
borderColor: [
'rgba(0, 0, 255, 1)',
],
borderWidth: 2
}
]
},
options: {
  scales: {
            yAxes: [{
                ticks: {
                    suggestedMin: 5,
                    suggestedMax: 0,
                    stepSize: 0.5
                },
                scaleLabel: {
                    display: true,
                    labelString: "€"
                },
            }]
      },
responsive: true,
legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 80,
      fontColor: 'black'
    }
  }
}
}); 

document.getElementById("card-vendite").hidden=false;
//line
var ctxL = document.getElementById("lineChartSemina").getContext('2d');
var myLineChart = new Chart(ctxL, {
type: 'line',
data: {
labels: ["Gen", "Feb", "Mar", "Apr", "Mag", "Giu", "Lug", "Ago", "Set", "Ott", "Nov", "Dic"],
datasets: [{
label: "Semina",
data: [65, 59, 80, 81, 56, 55, 40, 35, 56, 67, 34, 25],
backgroundColor: [
'rgba(255, 255, 0, 0.6)',
],
borderColor: [
'rgba(255, 255, 0, 1)',
],
borderWidth: 2
},
{
label: "Raccolta",
data: [28, 48, 40, 19, 86, 27, 90,35, 67, 54, 76, 54],
backgroundColor: [
'rgba(0, 255, 0, 0.6)',
],
borderColor: [
'rgba(0, 255, 0, 1)',
],
borderWidth: 2
}
]
},
options: {
  scales: {
            yAxes: [{
                ticks: {
                    suggestedMin: 5,
                    suggestedMax: 0,
                    stepSize: 0.5
                },
                scaleLabel: {
                    display: true,
                    labelString: "% di resa del prodotto"
                },
            }]
      },
responsive: true,
legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 80,
      fontColor: 'black'
    }
  }
}
});

document.getElementById("card-semina").hidden=false;            
        }

  </script>


</body>

</html>